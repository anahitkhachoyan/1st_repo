import time
import pwm_dac
import signal_generator as sg

# Параметры сигнала
amplitude = 1.2
signal_frequency = 10.0
sampling_frequency = 1000.0
tim = 0.0

if name == "__main__":
    try:
        # Если модуль работает как функция, а не класс
        pwm_dac.init()  # Инициализация если требуется
        
        while True:
            voltage = amplitude * sg.get_sin_wave_amplitude(signal_frequency, tim)
            
            # Пробуем разные варианты установки напряжения
            pwm_dac.output(voltage)  # или pwm_dac.write(voltage)
            
            time.sleep(1 / sampling_frequency)
            tim += 1 / sampling_frequency
            
    except KeyboardInterrupt:
        print("Остановлено")
        
    finally:
        pwm_dac.deinit()
