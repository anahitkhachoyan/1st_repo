import time
import pwm_dac
import signal_generator as sg

amplitude = 2.0
signal_frequency = 10.0
sampling_frequency = 100.0
tim = 0.0

if name == "__main__":
    try:
        pwm_dac.init()

        while True:
            # Генерируем треугольный сигнал вместо синусоидального
            voltage = amplitude * sg.get_triangle_wave_amplitude(signal_frequency, tim)
            
            pwm_dac.output(voltage)
            time.sleep(1 / sampling_frequency)
            tim += 1 / sampling_frequency

    except KeyboardInterrupt:
        print("Остановлено")

    finally:
        pwm_dac.deinit()
